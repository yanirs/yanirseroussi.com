{{/*
An embeddable subscribe form. Annoyingly also includes ConvertKit's script, but this will be sorted later.
*/}}
{{
$dataOptions := (dict
    "settings" (dict
        "after_subscribe" (dict
            "action" "message"
            "success_message" "Success! Now check your email to confirm your subscription."
            "redirect_url" ""
        )
        "recaptcha" (dict
            "enabled" false
        )
        "return_visitor" (dict
            "action" "show"
            "custom_content" ""
        )
    )
    "version" "5"
) | jsonify
}}

<div class="mailing-list-container">
  <script src="https://f.convertkit.com/ckjs/ck.5.js"></script>
  <form
    class="mailing-list seva-form formkit-form"
    action="https://app.convertkit.com/forms/6549537/subscriptions"
    method="post"
    data-sv-form="6549537"
    data-uid="9157759fce"
    data-format="inline"
    data-version="5"
    data-options='{{ $dataOptions }}'
  >
    <div data-style="clean">
      <ul class="formkit-alert formkit-alert-error" data-element="errors" data-group="alert"></ul>
      <div data-element="fields" data-stacked="false">
        <label for="mailing-list-email">Get weekly posts in your mailbox</label>
        <input
          id="mailing-list-email"
          name="email_address"
          aria-label="Email address"
          placeholder="Email address"
          required=""
          type="email"
        >
        <button data-element="submit">Subscribe</button>
      </div>
    </div>
  </form>
  <div class="footer">
    Alternatively, <a href="https://yanirseroussi.com/index.xml">subscribe to RSS feed</a>.
  </div>
</div>
